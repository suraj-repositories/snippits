<script>
        $(document).ready(function() {
            var table = $('.table_data').DataTable({
                "bFilter": false,

                ajax: {
                    url: "https://v5.checkprojectstatus.com/yannick_norbert_cpd360/admin/cpd-data",
                    data: function(d) {
                        d.title = $('input[name="title"]').val();
                        d.type = $('select[name="type"]').val();
                        d.status = $('select[name="status"]').val();
                    }
                },
                columns: [{
                        data: 'DT_RowIndex',
                        name: 'DT_RowIndex'
                    },
                    {
                        data: 'user_name',
                        name: 'user_name'
                    },
                    {
                        data: 'user_email',
                        name: 'user_email'
                    },

                    {
                        data: 'aria',
                        name: 'aria'
                    },

                    {
                        data: 'sub_aria',
                        name: 'sub_aria'
                    },
                    {
                        data: 'type',
                        name: 'type'
                    },
                    {
                        data: 'date',
                        name: 'date'
                    },
                    {
                        data: 'activity',
                        name: 'activity'
                    },
                    {
                        data: 'hours',
                        name: 'hours',
                        value: '150',
                    },
                    {
                        data: 'relevance',
                        name: 'relevance'
                    },


                    {
                        data: 'status',
                        name: 'status'
                    },
                    {
                        data: 'action',
                        name: 'action'
                    }
                ]
            });

            $('#search-form').on('submit', function(e) {
                table.draw();
                e.preventDefault();
            });


            $('#filter').click(function() {
                table.ajax.reload();
            });

            $('#clearBtn').click(function() {
                $('#search-form')[0].reset();
                table.ajax.reload();
            });

            //delete
            $(document).on("click", ".delete-button", function(e) {
                e.preventDefault();
                var id = $(this).attr("data-id");

                swal({
                    title: "Are you sure you want to delete this?",
                    text: "You will not be able to recover this action!",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            url: "https://v5.checkprojectstatus.com/yannick_norbert_cpd360/admin/cpd/delete",
                            datatType: 'json',
                            type: 'GET',
                            data: {
                                'id': id,
                            },
                            success: function(res) {

                                if (res.status === "success") {
                                    swal({
                                            title: "Deleted!",
                                            text: res.message,
                                            icon: "success",
                                            dangerMode: true,
                                            buttons: false,
                                            timer: 1000
                                        })
                                        .then(() => {
                                            table.ajax.reload();
                                        })

                                } else {
                                    swal("Error", "language.delete_already_used", "error");
                                }



                            }
                        });
                        // swal("Deleted!", "language.deleted_successfully", "success");
                    } else {
                        swal({
                            title: "Cancelled",
                            text: "You cancelled your action",
                            icon: "error",
                            buttons: false,
                            timer: 1500
                        })

                    }
                })

            });

        });
    </script>

    <script type="text/javascript">
        function changeStatus(id, status) {
            var token = 'Hp1rgoZ6JzYrD6dJMWtdE9IzHEYwlPYU48XkkjjD';

            $.ajax({
                url: "https://v5.checkprojectstatus.com/yannick_norbert_cpd360/admin/cpd/status",
                type: 'GET',
                data: {
                    'id': id,
                    'status': status,
                },
                success: function(res) {
                    if (res == "Success") {
                        swal({
                                title: "Change Status!",
                                text: "Status Change Sussessfully",
                                icon: "success",
                                dangerMode: true,
                                buttons: false,
                                timer: 1000
                            })
                            .then(() => {
                                $('.table_data').DataTable().ajax.reload();
                            })

                    }

                }
            });
        }
    </script>
